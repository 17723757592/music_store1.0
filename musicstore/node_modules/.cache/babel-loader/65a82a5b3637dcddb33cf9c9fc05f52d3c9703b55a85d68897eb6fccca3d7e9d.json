{"ast":null,"code":"import { mapState } from \"vuex\";\nimport getCategoryList from '@/api/list';\nexport default {\n  name: \"ModulesName\",\n  props: ['bread'],\n  data() {\n    return {\n      sortType: 0,\n      current: 0,\n      // goods: this.productionData.IPper.goods,\n      keyWord: '',\n      keyPri: {\n        bottom: '',\n        top: ''\n      },\n      goods: '',\n      sort: [{\n        id: 0,\n        title: '综合'\n      }, {\n        id: 1,\n        title: '价格由低到高'\n      }, {\n        id: 2,\n        title: '价格由高到低'\n      }],\n      identify: '',\n      category_id: ''\n      // abc:''\n    };\n  },\n\n  async created() {\n    this.$bus.$on('getKeyBra', this.getKeyWord);\n    // this.$bus.$on('getKeyBra',(data) =>{\n    //     console.log(data);\n    // })\n    this.$bus.$on('getKeyPri', this.getKeyPri);\n    this.category_id = this.bread == 'IP周边' ? '111' : '222';\n    await getCategoryList(this.category_id).then(res => {\n      this.goods = res.data.datas;\n      console.log(this.goods);\n    });\n  },\n  computed: {\n    ...mapState('home', ['productionData']),\n    goods_sort() {\n      const arr = this.goods.filter(goods => {\n        return goods.title.indexOf(this.keyWord) != -1;\n      });\n      if (this.sortType) {\n        arr.sort((g1, g2) => {\n          return this.sortType === 1 ? g1.money - g2.money : g2.money - g1.money;\n        });\n      }\n      if (this.keyPri.top) {\n        const Newarr = arr.filter(item => {\n          return item.money < this.keyPri.top && item.money > this.keyPri.bottom;\n        });\n        return Newarr;\n      }\n      return arr;\n    }\n  },\n  methods: {\n    event(index) {\n      this.sortType = index;\n      this.current = index;\n    },\n    getKeyWord(data) {\n      this.keyWord == data ? this.keyWord = '' : this.keyWord = data;\n    },\n    getKeyPri(data) {\n      this.keyPri.top == data[1] && this.keyPri.bottom == data[0] ? (this.keyPri.top = '', this.keyPri.bottom = '') : (this.keyPri.bottom = data[0], this.keyPri.top = data[1]);\n      console.log(this.keyPri.bottom, this.keyPri.top);\n    }\n  },\n  watch: {\n    productionData: {\n      immediate: true,\n      deep: true,\n      handler(val) {\n        this.identify = this.bread == 'IP周边' ? 'IPper' : 'DigitalVideo';\n        this.good = val[this.identify].goods;\n        console.log(this.good);\n      }\n    }\n  },\n  mounted() {\n    console.log(this.goods);\n  },\n  beforeDestroy() {\n    this.$bus.$off('getKeyBra', 'getKeyPri');\n  }\n};","map":{"version":3,"names":["mapState","getCategoryList","name","props","data","sortType","current","keyWord","keyPri","bottom","top","goods","sort","id","title","identify","category_id","created","$bus","$on","getKeyWord","getKeyPri","bread","then","res","datas","console","log","computed","goods_sort","arr","filter","indexOf","g1","g2","money","Newarr","item","methods","event","index","watch","productionData","immediate","deep","handler","val","good","mounted","beforeDestroy","$off"],"sources":["src/views/Modules.vue"],"sourcesContent":["<template>\r\n    <!-- 相关分类页面的商品展示模块 -->\r\n    <div class=\"IPpre-modules\">\r\n        <div class=\"m-product\">\r\n            <div>\r\n                <ul class=\"sortby\">\r\n                    <li v-for=\"(item,index) in sort\" :key=\"index\" :class=\"index == current ? 'active' :''\">\r\n                        <a href=\"javascript:\"><i :class=\"index !=0 ? 'point' : ''\"></i><em @click=\"event(index)\">{{ item.title }}</em></a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <ul class=\"recmdlist\" v-if=\"goods_sort.length > 0\">\r\n                <li class=\"recmditem\" v-for=\"(item, index) in goods_sort\" :key=\"item.data_id\"\r\n                    :style=\"(index + 1) % 4 == 0 ? { marginRight: '0px' } : ''\">\r\n                    <router-link :to=\"{ \r\n                        name: 'detail',\r\n                        params:{\r\n                            title:item.contend,\r\n                            id:item.data_id,\r\n                            bread:bread\r\n                        }\r\n                        }\">\r\n                        <div>\r\n                            <a class=\"imgbox\" href=\"javascript:\"><img class=\"productimg\" :src=\"item.show_piture\" alt=\"\" /></a>\r\n                            <div class=\"content\">\r\n                                <h3>\r\n                                    <span v-show=\"item.discount\" class=\"tag\"><em>{{ item.discount }}</em></span>&nbsp;\r\n                                    <a :href=\"item.href\">{{ item.title }}</a>\r\n                                </h3>\r\n                                <p class=\"f-thide\">\r\n                                    ￥<em>{{ item.price }}</em>\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n                    </router-link>\r\n                </li>\r\n            </ul>\r\n            <div v-else>\r\n                <h3>你要找商品还没有上架哟~</h3>\r\n            </div>\r\n        </div>\r\n        <div>\r\n            <div>\r\n                <div>\r\n                    <a href=\"javascript:\"></a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\nimport { mapState } from \"vuex\";\r\nimport getCategoryList from '@/api/list';\r\n\r\nexport default {\r\n    name: \"ModulesName\",\r\n    props:['bread'],\r\n    data() {\r\n        return {\r\n            sortType:0,\r\n            current:0,\r\n            // goods: this.productionData.IPper.goods,\r\n            keyWord:'',\r\n            keyPri:{\r\n                bottom:'',\r\n                top:''\r\n            },\r\n            goods:'',\r\n            sort:[\r\n                {id:0,title:'综合'},\r\n                {id:1,title:'价格由低到高'},\r\n                {id:2,title:'价格由高到低'},\r\n            ],\r\n            identify:'',\r\n            category_id:'',\r\n            // abc:''\r\n        };\r\n    },\r\n    async created(){\r\n        this.$bus.$on('getKeyBra', this.getKeyWord)\r\n        // this.$bus.$on('getKeyBra',(data) =>{\r\n        //     console.log(data);\r\n        // })\r\n        this.$bus.$on('getKeyPri', this.getKeyPri)\r\n        this.category_id = this.bread == 'IP周边' ? '111' : '222'\r\n        await getCategoryList(this.category_id).then(res=>{\r\n            this.goods = res.data.datas\r\n            console.log(this.goods);\r\n        })\r\n    },\r\n    computed: {\r\n        ...mapState('home',['productionData']),\r\n        goods_sort(){\r\n            const arr = this.goods.filter((goods)=>{  \r\n                return goods.title.indexOf(this.keyWord) != -1\r\n            })\r\n            if(this.sortType){\r\n                arr.sort((g1,g2) => {\r\n                    return this.sortType === 1 ? g1.money - g2.money : g2.money - g1.money\r\n                })\r\n            }\r\n            if(this.keyPri.top){\r\n                const Newarr = arr.filter((item)=>{\r\n                    return item.money < this.keyPri.top && item.money > this.keyPri.bottom\r\n                })\r\n                return Newarr\r\n            }\r\n            return arr\r\n        }\r\n    },\r\n    methods:{\r\n        event(index){\r\n            this.sortType = index\r\n            this.current = index\r\n        },\r\n        getKeyWord(data){\r\n            this.keyWord == data ? this.keyWord = '' : this.keyWord = data\r\n        },\r\n        getKeyPri(data){\r\n            (this.keyPri.top == data[1] && this.keyPri.bottom == data[0]) ? (this.keyPri.top = '',this.keyPri.bottom = '' ) : (this.keyPri.bottom = data[0],this.keyPri.top = data[1])\r\n            console.log(this.keyPri.bottom,this.keyPri.top);\r\n        }\r\n    },\r\n    watch:{\r\n        productionData:{\r\n            immediate:true,\r\n            deep:true,\r\n            handler(val){\r\n                this.identify = this.bread == 'IP周边' ? 'IPper' : 'DigitalVideo'\r\n                this.good = val[this.identify].goods\r\n                console.log(this.good);\r\n            }\r\n        }\r\n    },\r\n    mounted(){\r\n      console.log(this.goods);  \r\n    },\r\n    beforeDestroy(){\r\n        this.$bus.$off('getKeyBra','getKeyPri')\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.IPpre-modules {\r\n    overflow: hidden;\r\n}\r\n\r\n.sortby {\r\n    height: 21px;\r\n    margin: 30px 0 30px 0;\r\n    font-size: 16px;\r\n}\r\n\r\n.sortby li {\r\n    float: left;\r\n    padding-right: 16px;\r\n}\r\n\r\n.m-product {\r\n    width: 1100px;\r\n    margin: 0 auto;\r\n}\r\n\r\n.m-product div {\r\n    width: 100%;\r\n}\r\n\r\n.point {\r\n    float: left;\r\n    height: 21px;\r\n    padding-right: 16px;\r\n    background: url(../assets/point.png) left center no-repeat;\r\n}\r\n</style>"],"mappings":"AAqDA,SAAAA,QAAA;AACA,OAAAC,eAAA;AAEA;EACAC,IAAA;EACAC,KAAA;EACAC,KAAA;IACA;MACAC,QAAA;MACAC,OAAA;MACA;MACAC,OAAA;MACAC,MAAA;QACAC,MAAA;QACAC,GAAA;MACA;MACAC,KAAA;MACAC,IAAA,GACA;QAAAC,EAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,EAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,EAAA;QAAAC,KAAA;MAAA,EACA;MACAC,QAAA;MACAC,WAAA;MACA;IACA;EACA;;EACA,MAAAC,QAAA;IACA,KAAAC,IAAA,CAAAC,GAAA,mBAAAC,UAAA;IACA;IACA;IACA;IACA,KAAAF,IAAA,CAAAC,GAAA,mBAAAE,SAAA;IACA,KAAAL,WAAA,QAAAM,KAAA;IACA,MAAArB,eAAA,MAAAe,WAAA,EAAAO,IAAA,CAAAC,GAAA;MACA,KAAAb,KAAA,GAAAa,GAAA,CAAApB,IAAA,CAAAqB,KAAA;MACAC,OAAA,CAAAC,GAAA,MAAAhB,KAAA;IACA;EACA;EACAiB,QAAA;IACA,GAAA5B,QAAA;IACA6B,WAAA;MACA,MAAAC,GAAA,QAAAnB,KAAA,CAAAoB,MAAA,CAAApB,KAAA;QACA,OAAAA,KAAA,CAAAG,KAAA,CAAAkB,OAAA,MAAAzB,OAAA;MACA;MACA,SAAAF,QAAA;QACAyB,GAAA,CAAAlB,IAAA,EAAAqB,EAAA,EAAAC,EAAA;UACA,YAAA7B,QAAA,SAAA4B,EAAA,CAAAE,KAAA,GAAAD,EAAA,CAAAC,KAAA,GAAAD,EAAA,CAAAC,KAAA,GAAAF,EAAA,CAAAE,KAAA;QACA;MACA;MACA,SAAA3B,MAAA,CAAAE,GAAA;QACA,MAAA0B,MAAA,GAAAN,GAAA,CAAAC,MAAA,CAAAM,IAAA;UACA,OAAAA,IAAA,CAAAF,KAAA,QAAA3B,MAAA,CAAAE,GAAA,IAAA2B,IAAA,CAAAF,KAAA,QAAA3B,MAAA,CAAAC,MAAA;QACA;QACA,OAAA2B,MAAA;MACA;MACA,OAAAN,GAAA;IACA;EACA;EACAQ,OAAA;IACAC,MAAAC,KAAA;MACA,KAAAnC,QAAA,GAAAmC,KAAA;MACA,KAAAlC,OAAA,GAAAkC,KAAA;IACA;IACApB,WAAAhB,IAAA;MACA,KAAAG,OAAA,IAAAH,IAAA,QAAAG,OAAA,aAAAA,OAAA,GAAAH,IAAA;IACA;IACAiB,UAAAjB,IAAA;MACA,KAAAI,MAAA,CAAAE,GAAA,IAAAN,IAAA,YAAAI,MAAA,CAAAC,MAAA,IAAAL,IAAA,YAAAI,MAAA,CAAAE,GAAA,YAAAF,MAAA,CAAAC,MAAA,eAAAD,MAAA,CAAAC,MAAA,GAAAL,IAAA,UAAAI,MAAA,CAAAE,GAAA,GAAAN,IAAA;MACAsB,OAAA,CAAAC,GAAA,MAAAnB,MAAA,CAAAC,MAAA,OAAAD,MAAA,CAAAE,GAAA;IACA;EACA;EACA+B,KAAA;IACAC,cAAA;MACAC,SAAA;MACAC,IAAA;MACAC,QAAAC,GAAA;QACA,KAAA/B,QAAA,QAAAO,KAAA;QACA,KAAAyB,IAAA,GAAAD,GAAA,MAAA/B,QAAA,EAAAJ,KAAA;QACAe,OAAA,CAAAC,GAAA,MAAAoB,IAAA;MACA;IACA;EACA;EACAC,QAAA;IACAtB,OAAA,CAAAC,GAAA,MAAAhB,KAAA;EACA;EACAsC,cAAA;IACA,KAAA/B,IAAA,CAAAgC,IAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}