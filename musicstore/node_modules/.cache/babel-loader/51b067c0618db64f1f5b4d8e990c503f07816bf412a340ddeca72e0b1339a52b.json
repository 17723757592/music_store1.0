{"ast":null,"code":"export default {\n  namespaced: true,\n  state: {\n    shoppingCart: JSON.parse(sessionStorage.getItem('shoppingCart')) || []\n  },\n  mutations: {\n    getShoppingCartNumber(state, id) {\n      state.shoppingCart.forEach(item => {\n        if (item.id === id) {\n          console.log(item.number, item.price, typeof item.price);\n          return item.number;\n        }\n      });\n    },\n    JIA(state, id) {\n      state.shoppingCart.forEach(item => {\n        if (item.id === id) {\n          item.number++;\n        }\n      });\n      // console.log(state);  \n    },\n\n    JIAN(state, id) {\n      state.shoppingCart.forEach(item => {\n        if (item.id === id) {\n          item.number--;\n        }\n      });\n    },\n    setShoppingCart(state, data) {\n      // 设置购物车状态\n      state.shoppingCart = data;\n    },\n    unshiftShoppingCart(state, data) {\n      // 添加购物车\n      // 用于在商品详情页点击添加购物车,后台添加成功后，更新vuex状态\n      state.shoppingCart.unshift(data);\n      sessionStorage.setItem('shoppingCart', JSON.stringify(state.shoppingCart));\n    },\n    deleteShoppingCart(state, id) {\n      if (confirm('确定删除吗？')) {\n        state.shoppingCart = state.shoppingCart.filter(item => {\n          return item.id != id;\n        });\n        sessionStorage.setItem('shoppingCart', JSON.stringify(state.shoppingCart));\n      }\n    },\n    changeCheck(state, id) {\n      state.shoppingCart.forEach(item => {\n        if (item.id === id) {\n          item.check = !item.check;\n        }\n      });\n    }\n  },\n  actions: {\n    jian(context, id) {\n      context.state.shoppingCart.forEach(item => {\n        if (item.id === id && item.number > 1) {\n          context.commit('JIAN');\n        }\n      });\n    },\n    unshiftShoppingCart(_ref, data) {\n      let {\n        commit\n      } = _ref;\n      commit('unshiftShoppingCart', data);\n    }\n  },\n  getters: {\n    // getShoppingCartNumber(state,id) {\n    //     state.shoppingCart.forEach((item)=>{\n    //         if(item.id===id){\n    //             return item.number\n    //         }\n    //     })\n    //   },\n  }\n};","map":{"version":3,"names":["namespaced","state","shoppingCart","JSON","parse","sessionStorage","getItem","mutations","getShoppingCartNumber","id","forEach","item","console","log","number","price","JIA","JIAN","setShoppingCart","data","unshiftShoppingCart","unshift","setItem","stringify","deleteShoppingCart","confirm","filter","changeCheck","check","actions","jian","context","commit","_ref","getters"],"sources":["D:/WYKS2python/musicstore/src/store/modules/cart.js"],"sourcesContent":["export default {\r\n    namespaced:true,\r\n    state:{\r\n        shoppingCart:JSON.parse(sessionStorage.getItem('shoppingCart')) || []\r\n    },\r\n    mutations:{\r\n        getShoppingCartNumber(state,id) {\r\n            state.shoppingCart.forEach((item)=>{\r\n                if(item.id===id){\r\n                    console.log(item.number,item.price , typeof(item.price));\r\n                    return item.number\r\n                }\r\n            })\r\n          },\r\n        JIA(state,id) {\r\n            state.shoppingCart.forEach((item)=>{\r\n                if(item.id===id){item.number++}\r\n            })\r\n            // console.log(state);  \r\n        },\r\n        JIAN(state,id) {\r\n            state.shoppingCart.forEach((item)=>{\r\n                if(item.id===id){item.number--}\r\n            })\r\n    \r\n        },\r\n        setShoppingCart (state, data) {\r\n            // 设置购物车状态\r\n            state.shoppingCart = data;\r\n          },\r\n        unshiftShoppingCart (state, data) {\r\n        // 添加购物车\r\n        // 用于在商品详情页点击添加购物车,后台添加成功后，更新vuex状态\r\n            state.shoppingCart.unshift(data)\r\n            sessionStorage.setItem('shoppingCart',JSON.stringify(state.shoppingCart))\r\n            },\r\n        deleteShoppingCart (state, id) {\r\n            if(confirm('确定删除吗？')){\r\n                state.shoppingCart = state.shoppingCart.filter((item)=>{\r\n                    return item.id != id\r\n                })\r\n                sessionStorage.setItem('shoppingCart',JSON.stringify(state.shoppingCart))\r\n            }\r\n            },\r\n        changeCheck(state,id){\r\n            state.shoppingCart.forEach((item)=>{\r\n                if(item.id===id){item.check = !item.check}\r\n            })\r\n        }\r\n      \r\n    },\r\n    actions:{\r\n        jian(context,id) {\r\n            context.state.shoppingCart.forEach((item)=>{\r\n                if(item.id===id && item.number > 1){\r\n                    context.commit('JIAN')\r\n                }\r\n            })\r\n        },\r\n        unshiftShoppingCart ({ commit }, data) {\r\n            commit('unshiftShoppingCart', data);\r\n        },\r\n          \r\n      \r\n    },\r\n    getters:{\r\n        // getShoppingCartNumber(state,id) {\r\n        //     state.shoppingCart.forEach((item)=>{\r\n        //         if(item.id===id){\r\n        //             return item.number\r\n        //         }\r\n        //     })\r\n        //   },\r\n      \r\n    }\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}