{"ast":null,"code":"export default {\n  name: 'LoginName',\n  props: ['single'],\n  data() {\n    return {\n      form: {\n        name: '',\n        pwd: '',\n        region: '',\n        delivery: false,\n        type: [],\n        resource: '',\n        desc: ''\n      },\n      formLabelWidth: '90px',\n      visible: true\n    };\n  },\n  methods: {\n    addUser() {\n      localStorage.setItem(this.form.name, this.form.pwd);\n      this.$message({\n        showClose: true,\n        message: '恭喜你，注册成功',\n        type: 'success'\n      });\n    },\n    success() {\n      this.$message({\n        showClose: true,\n        message: '登录成功',\n        type: 'success'\n      });\n    },\n    errorPwd() {\n      this.$message({\n        showClose: true,\n        message: '密码错误',\n        type: 'error'\n      });\n    },\n    login() {\n      let check = localStorage.getItem(this.form.name) || '';\n      if (check) {\n        this.form.pwd ? this.success() : this.errorPwd();\n        // this.visible = false\n        return 0;\n      }\n      this.$message({\n        showClose: true,\n        message: '查无此用户',\n        type: 'warning'\n      });\n    }\n  },\n  watch: {\n    visible() {\n      this.$bus.$on('visible', single => {\n        this.visible = single;\n        console.log(single, this.visible);\n      });\n    },\n    form: {\n      deep: true,\n      handler(val) {\n        this.form.name = val.name;\n        this.form.pwd = val.pwd;\n      }\n    }\n  },\n  mounted() {\n    console.log(this.visible, this.single);\n  },\n  beforeDestroy() {\n    this.$bus.$off('visible');\n  }\n};","map":{"version":3,"names":["name","props","data","form","pwd","region","delivery","type","resource","desc","formLabelWidth","visible","methods","addUser","localStorage","setItem","$message","showClose","message","success","errorPwd","login","check","getItem","watch","$bus","$on","single","console","log","deep","handler","val","mounted","beforeDestroy","$off"],"sources":["src/login/login.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <el-dialog title=\"CloudMusicStore-login\" :visible=\"visible\">\r\n          <el-form :model=\"form\" justify=\"center\">\r\n              <el-form-item label=\"用户名\" :label-width=\"formLabelWidth\">\r\n                  <el-input v-model=\"form.name\" autofocus=\"true\" autocomplete=\"off\" :style=\"{width:'90%'}\"></el-input>\r\n              </el-form-item>\r\n              <el-form-item label=\"密码\" :label-width=\"formLabelWidth\">\r\n                  <el-input v-model=\"form.pwd\" show-password autocomplete=\"off\" :style=\"{width:'90%'}\"></el-input>\r\n              </el-form-item>\r\n          </el-form>\r\n          <div slot=\"footer\" class=\"dialog-footer\" :style=\"{'text-align':'center'}\">\r\n            <el-button @click=\"addUser\" >注 册</el-button>  \r\n            <el-button type=\"primary\" @click=\"login\">登 录</el-button>\r\n          </div>\r\n        </el-dialog>  \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:'LoginName',\r\n    props:['single'],\r\n    data() {\r\n      return {\r\n        form: {\r\n          name:'',\r\n          pwd:'',\r\n          region: '',\r\n          delivery: false,\r\n          type: [],\r\n          resource: '',\r\n          desc: ''\r\n        },\r\n        formLabelWidth: '90px',\r\n        visible: true\r\n      };\r\n    },\r\n    methods:{\r\n      addUser(){\r\n        localStorage.setItem(this.form.name, this.form.pwd)\r\n        this.$message({\r\n          showClose: true,\r\n          message: '恭喜你，注册成功',\r\n          type: 'success'\r\n        });\r\n      },\r\n      success(){\r\n        this.$message({\r\n          showClose: true,\r\n          message: '登录成功',\r\n          type: 'success'\r\n        });\r\n      },\r\n      errorPwd(){\r\n        this.$message({\r\n          showClose: true,\r\n          message: '密码错误',\r\n          type: 'error'\r\n        });\r\n      },\r\n      login(){\r\n        let check = localStorage.getItem(this.form.name) || ''\r\n        if(check){\r\n          this.form.pwd ? this.success() : this.errorPwd()\r\n          // this.visible = false\r\n         return 0 \r\n        }\r\n        this.$message({\r\n          showClose: true,\r\n          message: '查无此用户',\r\n          type: 'warning'\r\n        });\r\n      }\r\n    },\r\n    watch:{\r\n      visible(){\r\n        this.$bus.$on('visible',(single)=>{\r\n          this.visible = single\r\n          console.log(single, this.visible);\r\n        })\r\n      },\r\n      form:{\r\n        deep:true,\r\n        handler(val){\r\n          this.form.name = val.name\r\n          this.form.pwd = val.pwd\r\n        }\r\n      }\r\n    },\r\n    mounted(){\r\n      console.log(this.visible,this.single);\r\n    },\r\n    beforeDestroy(){\r\n      this.$bus.$off('visible')\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>"],"mappings":"AAoBA;EACAA,IAAA;EACAC,KAAA;EACAC,KAAA;IACA;MACAC,IAAA;QACAH,IAAA;QACAI,GAAA;QACAC,MAAA;QACAC,QAAA;QACAC,IAAA;QACAC,QAAA;QACAC,IAAA;MACA;MACAC,cAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACAC,QAAA;MACAC,YAAA,CAAAC,OAAA,MAAAZ,IAAA,CAAAH,IAAA,OAAAG,IAAA,CAAAC,GAAA;MACA,KAAAY,QAAA;QACAC,SAAA;QACAC,OAAA;QACAX,IAAA;MACA;IACA;IACAY,QAAA;MACA,KAAAH,QAAA;QACAC,SAAA;QACAC,OAAA;QACAX,IAAA;MACA;IACA;IACAa,SAAA;MACA,KAAAJ,QAAA;QACAC,SAAA;QACAC,OAAA;QACAX,IAAA;MACA;IACA;IACAc,MAAA;MACA,IAAAC,KAAA,GAAAR,YAAA,CAAAS,OAAA,MAAApB,IAAA,CAAAH,IAAA;MACA,IAAAsB,KAAA;QACA,KAAAnB,IAAA,CAAAC,GAAA,QAAAe,OAAA,UAAAC,QAAA;QACA;QACA;MACA;MACA,KAAAJ,QAAA;QACAC,SAAA;QACAC,OAAA;QACAX,IAAA;MACA;IACA;EACA;EACAiB,KAAA;IACAb,QAAA;MACA,KAAAc,IAAA,CAAAC,GAAA,YAAAC,MAAA;QACA,KAAAhB,OAAA,GAAAgB,MAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,MAAA,OAAAhB,OAAA;MACA;IACA;IACAR,IAAA;MACA2B,IAAA;MACAC,QAAAC,GAAA;QACA,KAAA7B,IAAA,CAAAH,IAAA,GAAAgC,GAAA,CAAAhC,IAAA;QACA,KAAAG,IAAA,CAAAC,GAAA,GAAA4B,GAAA,CAAA5B,GAAA;MACA;IACA;EACA;EACA6B,QAAA;IACAL,OAAA,CAAAC,GAAA,MAAAlB,OAAA,OAAAgB,MAAA;EACA;EACAO,cAAA;IACA,KAAAT,IAAA,CAAAU,IAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}