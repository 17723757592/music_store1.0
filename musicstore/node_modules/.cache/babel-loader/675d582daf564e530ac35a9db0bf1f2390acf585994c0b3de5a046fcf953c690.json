{"ast":null,"code":"import { mapActions, mapMutations, mapGetters } from 'vuex';\nexport default {\n  name: 'CountNumber',\n  props: ['id'],\n  data() {\n    return {\n      put: ''\n      // countNumber:''\n    };\n  },\n\n  created() {\n    this.put = this.countNumber;\n  },\n  methods: {\n    ...mapActions('cart', ['jian']),\n    ...mapMutations('cart', ['JIA']),\n    changeNumber(put) {\n      console.log(put);\n      //需要检验输入的数据是否是数字\n    }\n  },\n\n  computed: {\n    countNumber: {\n      get() {\n        return this.getShoppingCartNumber(this.id).number || 1;\n      },\n      set(val) {\n        this.put = val;\n      }\n    },\n    ...mapGetters('cart', ['getShoppingCartNumber'])\n  },\n  watch: {\n    // countNumber:{\n    //     immediate:true,\n    //     deep:true,\n    //     handler(val){\n    //         this.put = val\n    //     }\n    // },\n    put: {\n      deep: true,\n      handler(newVal) {\n        // sessionStorage.setItem('number',newVal)\n        this.countNumber = newVal;\n      }\n    }\n  },\n  mounted() {\n    console.log(this.getShoppingCartNumber(this.id));\n    // this.countNumber = this.getShoppingCartNumber(this.id)\n  }\n};","map":{"version":3,"names":["mapActions","mapMutations","mapGetters","name","props","data","put","created","countNumber","methods","changeNumber","console","log","computed","get","getShoppingCartNumber","id","number","set","val","watch","deep","handler","newVal","mounted"],"sources":["src/details/Count.vue"],"sourcesContent":["<template>\r\n    <!-- 对商品计数加减操作功能模块 -->\r\n    <div class=\"count-box\">\r\n        <div class=\"u-number\">\r\n            <a class=\"u-btn\" href=\"javascript:\" @click=\"jian(id)\"><i :style=\"{backgroundPositionX:'-38px',backgroundPositionY:'-534px'}\"></i></a>\r\n            <span class=\"tot\"><input type=\"text\" v-model=\"put\" @blur=\"changeNumber(put)\"></span>\r\n            <a class=\"u-btn\" href=\"javascript:\" @click=\"JIA(id)\"><i :style=\"{backgroundPositionX:'0px',backgroundPositionY:'-534px'}\"></i></a>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapActions,mapMutations,mapGetters} from 'vuex';\r\n\r\nexport default {\r\n    name:'CountNumber',\r\n    props:['id'],\r\n    data(){\r\n        return{\r\n            put:'',\r\n            // countNumber:''\r\n        }\r\n    },\r\n    created() {\r\n        this.put =  this.countNumber\r\n    },\r\n    methods: {\r\n        ...mapActions('cart', ['jian']),\r\n        ...mapMutations('cart',['JIA',]),\r\n        changeNumber(put){\r\n            console.log(put);\r\n            //需要检验输入的数据是否是数字\r\n        },\r\n    },\r\n    computed:{\r\n        countNumber:{\r\n            get(){\r\n                return this.getShoppingCartNumber(this.id).number || 1\r\n            },\r\n            set(val){\r\n                this.put = val\r\n            }\r\n        },\r\n        ...mapGetters('cart', ['getShoppingCartNumber'])\r\n    },\r\n    watch:{ \r\n        // countNumber:{\r\n        //     immediate:true,\r\n        //     deep:true,\r\n        //     handler(val){\r\n        //         this.put = val\r\n        //     }\r\n        // },\r\n        put:{\r\n            deep:true,\r\n            handler(newVal){\r\n                // sessionStorage.setItem('number',newVal)\r\n                this.countNumber = newVal\r\n            }\r\n        }\r\n    },\r\n    mounted(){\r\n        console.log(this.getShoppingCartNumber(this.id));\r\n        // this.countNumber = this.getShoppingCartNumber(this.id)\r\n    }\r\n\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.count-box{\r\n    overflow: hidden;\r\n    .u-number{\r\n        float: left;\r\n        width: 132px;\r\n        height: 30px;\r\n        border: 1px solid #e5e5e5;\r\n        border-left: none;\r\n        .u-btn{\r\n            float: left;\r\n            width: 34px;\r\n            height: 30px;\r\n            border-left: 1px solid #e5e5e5;\r\n            i{\r\n                position: relative;\r\n                left: 3px;\r\n                top: 1px;\r\n                display: block;\r\n                width: 100%;\r\n                height: 100%;\r\n                overflow: hidden;\r\n                background: url(../assets/icon.png) no-repeat\r\n            }\r\n        }\r\n        .tot{\r\n            float: left;\r\n            width: 59px;\r\n            height: 30px;\r\n            border-left: 1px solid #e5e5e5;\r\n            input{\r\n                width: 100%;\r\n                margin: 0;\r\n                padding: 0;\r\n                border: none;\r\n                font-size: 14px;\r\n                height: 30px;\r\n                line-height: 30px;\r\n                text-align: center;\r\n            }\r\n        }\r\n    }\r\n}\r\n</style>"],"mappings":"AAYA,SAAAA,UAAA,EAAAC,YAAA,EAAAC,UAAA;AAEA;EACAC,IAAA;EACAC,KAAA;EACAC,KAAA;IACA;MACAC,GAAA;MACA;IACA;EACA;;EACAC,QAAA;IACA,KAAAD,GAAA,QAAAE,WAAA;EACA;EACAC,OAAA;IACA,GAAAT,UAAA;IACA,GAAAC,YAAA;IACAS,aAAAJ,GAAA;MACAK,OAAA,CAAAC,GAAA,CAAAN,GAAA;MACA;IACA;EACA;;EACAO,QAAA;IACAL,WAAA;MACAM,IAAA;QACA,YAAAC,qBAAA,MAAAC,EAAA,EAAAC,MAAA;MACA;MACAC,IAAAC,GAAA;QACA,KAAAb,GAAA,GAAAa,GAAA;MACA;IACA;IACA,GAAAjB,UAAA;EACA;EACAkB,KAAA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAd,GAAA;MACAe,IAAA;MACAC,QAAAC,MAAA;QACA;QACA,KAAAf,WAAA,GAAAe,MAAA;MACA;IACA;EACA;EACAC,QAAA;IACAb,OAAA,CAAAC,GAAA,MAAAG,qBAAA,MAAAC,EAAA;IACA;EACA;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}