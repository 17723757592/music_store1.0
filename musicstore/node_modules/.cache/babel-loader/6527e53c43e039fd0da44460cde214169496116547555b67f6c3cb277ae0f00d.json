{"ast":null,"code":"import { nanoid } from 'nanoid';\nimport { mapState, mapMutations, mapActions } from 'vuex';\n// import mixin from '../mixin.js';\n// import CountNumber from './Count.vue'\nexport default {\n  name: 'DeBody',\n  props: ['titleR', 'price', 'id', 'goods'],\n  // components:{CountNumber},\n  // mixins:[mixin],\n  data() {\n    return {\n      isVisable: false,\n      number: 1,\n      put: '',\n      countNumber: 1\n    };\n  },\n  methods: {\n    demo(data) {\n      this.number = data;\n      console.log(this.number);\n    },\n    ...mapMutations('cart', ['unshiftShoppingCart', 'JIA']),\n    ...mapActions('cart', ['jian']),\n    addProduction() {\n      // 拿到某一商品数量进一步放进购物车\n      // this.$bus.$on('takeNumber',this.demo)\n      const goods = {\n        id: nanoid(),\n        title: this.titleR,\n        price: this.price,\n        number: this.number,\n        check: true\n      };\n      this.unshiftShoppingCart(goods);\n      // store刷新数据丢失，存入浏览器，，写在app组件里\n      this.$message({\n        showClose: true,\n        message: '成功加入购物车',\n        type: 'success'\n      });\n    },\n    windowScrollListener() {\n      var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\n      // console.log(scrollTop);\n      if (scrollTop >= 555) {\n        this.isVisable = true;\n      }\n      if (scrollTop < 555) {\n        this.isVisable = false;\n      }\n    }\n  },\n  watch: {\n    countNumber: {\n      immediate: true,\n      deep: true,\n      handler(val) {\n        this.put = val;\n      }\n    },\n    put: {\n      deep: true,\n      handler(newVal) {\n        // sessionStorage.setItem('number',newVal)\n        this.countNumber = newVal;\n      }\n    }\n  },\n  computed: {\n    ...mapState('home', ['productionData'])\n    //     ...mapGetters('home', ['number'])\n  },\n\n  created() {\n    window.addEventListener('scroll', this.windowScrollListener);\n    this.$bus.$on('takeNumber', this.demo);\n  },\n  // watch:{\n  //     number:{\n  //         immediate:true,\n  //         deep:true,\n  //         handler(val){\n  //             this.put = val\n  //         }\n  //     },\n  //     put:{\n  //         deep:true,\n  //         handler(newVal){\n  //             sessionStorage.setItem('number',newVal)\n  //         }\n  //     }\n\n  // },\n  destroyed() {\n    window.removeEventListener('scroll', this.windowScrollListener);\n    this.$bus.$off('takeNumber');\n  }\n};","map":{"version":3,"names":["nanoid","mapState","mapMutations","mapActions","name","props","data","isVisable","number","put","countNumber","methods","demo","console","log","addProduction","goods","id","title","titleR","price","check","unshiftShoppingCart","$message","showClose","message","type","windowScrollListener","scrollTop","document","body","documentElement","watch","immediate","deep","handler","val","newVal","computed","created","window","addEventListener","$bus","$on","destroyed","removeEventListener","$off"],"sources":["src/details/DeBody.vue"],"sourcesContent":["<template>\r\n    <!-- 主要信息展示模块 -->\r\n    <div class=\"g-main\">\r\n        <div class=\"n-detail\">\r\n            <div class=\"f-cb\" :style=\"{minHeight:'530px',overflow:'hidden'}\">\r\n                <div class=\"img-display\" :style=\"{float:'left',}\">\r\n                    <div class=\"pic\">\r\n                        <div class=\"imgbox\">\r\n                        <img src=\"http://p4.music.126.net/1uVIZ3FicR1Jj13Q5c-0Rw==/109951167042127430.jpg?param=440y440\" alt=\"\"></div>\r\n                    </div>\r\n                    <div class=\"smallnav\">\r\n                        <ul>\r\n                            <li v-for=\"(item,index) in goods.detailnav\" :key=\"index\">\r\n                                <img :src=\"item\" alt=\"\">\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <div class=\"n-info\">\r\n                    <div class=\"basic\">\r\n                        <h2>{{titleR}}</h2>\r\n                        <p class=\"price\">\r\n                            <span>￥</span>\r\n                            <em>{{ price }}</em>\r\n                        </p>\r\n                        <div class=\"standard\">\r\n                            <div class=\"select-box\">\r\n                                <div class=\"detailtext\">规格:</div>\r\n                                <ul>\r\n                                    <li><p>{{ '戒指均码' }}</p></li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"count\">\r\n                            <div class=\"count-box\">\r\n                                <p class=\"detailtext\">数量:</p>\r\n                                <!-- <CountNumber></CountNumber> -->\r\n                                <div class=\"count-box\">\r\n                                    <div class=\"u-number\">\r\n                                        <a class=\"u-btn\" href=\"javascript:\" @click=\"jian(id)\"><i :style=\"{backgroundPositionX:'-38px',backgroundPositionY:'-534px'}\"></i></a>\r\n                                        <span class=\"tot\"><input type=\"text\" v-model=\"put\" @blur=\"changeNumber(put)\">{{ id }}</span>\r\n                                        <a class=\"u-btn\" href=\"javascript:\" @click=\"JIA(id)\"><i :style=\"{backgroundPositionX:'0px',backgroundPositionY:'-534px'}\"></i></a>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"services\">\r\n                        <p class=\"detailtext\">服务:</p>\r\n                        <div class=\"servecnt\">\r\n                            <a class=\"serveitem\" href=\"javascript:\">{{'7天无理由退货' }}</a>\r\n                        </div>\r\n                    </div>\r\n                    <p class=\"buyit\">\r\n                        <a class=\"buybtn buybtn1\" href=\"javascript:\">立即购买</a>\r\n                        <a class=\"buybtn tocar buybtn1\" href=\"javascript:\" @click=\"addProduction\">加入购物车</a>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            <div class=\"n-contend\">\r\n                <div class=\"n-contend-left\">\r\n                    <h2 class=\"headline\">商品详情</h2>\r\n                    <div class=\"n-describe\">\r\n                        <div class=\"j-flag\">\r\n                            <img src=\"http://p3.music.126.net/qd5rYtXbSKA8ZsH4iwLcZQ==/109951167042132880.jpg?imageView&thumbnail=700x0&quality=75\" alt=\"\">\r\n                            <img src=\"http://p4.music.126.net/CfzQPDwTUXR6bcvEK-LTQQ==/109951167042137146.jpg?imageView&thumbnail=700x0&quality=75\" alt=\"\">\r\n                            <p><br></p>\r\n                            <p><span>购买须知</span></p>\r\n                            <p><span>商品购买成功后，会在2个工作日内发货，法定节假日顺延，请在确认商品完好后再签收。</span></p>\r\n                            <p><span>若存在质量问题，请务必在签收后7天内联系客服。</span></p>\r\n                            <p><span>客服账号：向【云音乐客服】账号私信反馈</span></p>\r\n                        </div>\r\n                    </div>\r\n                    <div></div>\r\n                </div>\r\n                <div class=\"hotrecommned\">\r\n                    <h2 class=\"headline normal\">热门商品</h2>\r\n                    <div class=\"m-product\">\r\n                        <ul class=\"recmdlist\">\r\n                            <li class=\"hotitem\" v-for=\"(item,index) in productionData.recommend\" :key=\"item.data_id\" v-show=\"index < 4\">\r\n                                <div>\r\n                                    <a class=\"picbox\"  :href=\"item.href\"><img :src=\"item.img\" alt=\"\"></a>\r\n                                    <div class=\"content\">\r\n                                        <h3>\r\n                                            <span v-show=\"item.discount\" class=\"tag\"><em>{{item.discount}}</em></span>&nbsp;\r\n                                            <a :href=\"item.href\">{{item.contend }}</a>\r\n                                        </h3>\r\n                                        <p class=\"f-thide\">￥<em>{{item.money}}</em></p> \r\n                                    </div>\r\n                                </div>\r\n                            </li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div ref=\"topbar\" class=\"topbar\" v-show=\"isVisable\">\r\n                <div class=\"barbox\">\r\n                    <div class=\"imgbox\"><img src=\"http://p3.music.126.net/ya7CWKccVry8DC9lcyDnfw==/109951167042139522.jpg?param=100y100\" alt=\"\"></div>\r\n                    <div class=\"barmsg\">\r\n                        <p>{{ titleR }}</p>\r\n                        <span :style=\"{color:'#d33a31'}\">{{price}}</span>\r\n                    </div>\r\n                    <p class=\"buyit\" :style=\"{float:'right'}\">\r\n                        <a class=\"buybtn buybtn2\" href=\"javascript:\">立即购买</a>\r\n                        <a class=\"buybtn tocar buybtn2\" href=\"javascript:\" @click=\"addProduction\">加入购物车</a>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n            <div></div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {nanoid} from 'nanoid'\r\nimport {mapState, mapMutations,mapActions} from 'vuex';\r\n// import mixin from '../mixin.js';\r\n// import CountNumber from './Count.vue'\r\nexport default {    \r\n    name:'DeBody',\r\n    props:['titleR','price','id', 'goods'],\r\n    // components:{CountNumber},\r\n    // mixins:[mixin],\r\n    data(){\r\n        return{\r\n            isVisable:false,\r\n            number:1,\r\n            put:'',\r\n            countNumber:1\r\n        }\r\n    },\r\n    methods:{\r\n        demo(data){\r\n            this.number = data\r\n            console.log(this.number);\r\n        },\r\n        ...mapMutations('cart', ['unshiftShoppingCart','JIA']),\r\n        ...mapActions('cart',['jian']),\r\n        addProduction(){\r\n            // 拿到某一商品数量进一步放进购物车\r\n            // this.$bus.$on('takeNumber',this.demo)\r\n            const goods = {\r\n                    id:nanoid(),\r\n                    title:this.titleR,\r\n                    price:this.price,\r\n                    number:this.number,\r\n                    check:true\r\n                }\r\n            this.unshiftShoppingCart(goods)\r\n            // store刷新数据丢失，存入浏览器，，写在app组件里\r\n            this.$message({\r\n                showClose: true,\r\n                message: '成功加入购物车',\r\n                type: 'success'\r\n                });\r\n            \r\n        },\r\n        windowScrollListener() {\r\n            var scrollTop = document.body.scrollTop || document.documentElement.scrollTop;\r\n            // console.log(scrollTop);\r\n            if (scrollTop >= 555) {\r\n                this.isVisable = true; \r\n            }\r\n            if (scrollTop < 555) {\r\n                this.isVisable = false; \r\n            }\r\n        },\r\n    },\r\n    watch:{\r\n        countNumber:{\r\n            immediate:true,\r\n            deep:true,\r\n            handler(val){\r\n                this.put = val\r\n            }\r\n        },\r\n        put:{\r\n            deep:true,\r\n            handler(newVal){\r\n                // sessionStorage.setItem('number',newVal)\r\n                this.countNumber = newVal\r\n            }\r\n        }\r\n    },\r\n    computed:{\r\n        ...mapState('home',['productionData']),   \r\n    //     ...mapGetters('home', ['number'])\r\n\r\n    },\r\n    created(){\r\n        window.addEventListener('scroll', this.windowScrollListener);\r\n        this.$bus.$on('takeNumber',this.demo)\r\n    },\r\n    // watch:{\r\n    //     number:{\r\n    //         immediate:true,\r\n    //         deep:true,\r\n    //         handler(val){\r\n    //             this.put = val\r\n    //         }\r\n    //     },\r\n    //     put:{\r\n    //         deep:true,\r\n    //         handler(newVal){\r\n    //             sessionStorage.setItem('number',newVal)\r\n    //         }\r\n    //     }\r\n\r\n\r\n    // },\r\n    destroyed(){\r\n        window.removeEventListener('scroll', this.windowScrollListener);\r\n        this.$bus.$off('takeNumber')\r\n    }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.detailtext{\r\n    height: 30px;\r\n    line-height: 30px;\r\n    color: #999;\r\n    float: left;\r\n    margin-right: 30px;\r\n    font-size: 12px;\r\n}\r\n.headline{\r\n    height: 30px;\r\n    line-height: 30px;\r\n    padding-bottom: 17px;\r\n    margin-bottom: 20px;\r\n    border-bottom: 1px solid #000;\r\n    font-size: 22px;\r\n}\r\n.buyit{\r\n        overflow: hidden;\r\n        .buybtn1{\r\n            width: 170px;\r\n            height: 50px;\r\n            line-height: 47px;\r\n            margin-top: 30px;\r\n        }\r\n        .buybtn2{\r\n            width: 160px;\r\n            height: 40px;\r\n            line-height: 37px;\r\n            margin-top: 14px;\r\n        }\r\n        .buybtn{\r\n            float: left;\r\n            box-sizing: border-box;\r\n            font-size: 18px;\r\n            border: 2px solid #d33a31;\r\n            color: #d33a31;\r\n            background-color: white;\r\n            text-align: center;\r\n            margin-right: 10px;\r\n        }\r\n        .tocar{\r\n            background-color:#d33a31;\r\n            color: white;\r\n        }\r\n            }\r\n.g-main{\r\n    width: 100%;\r\n    text-align: left;\r\n    margin: 0;\r\n    .n-detail{\r\n        padding-top: 5px;\r\n        min-height: 600px;\r\n        .f-cb{\r\n            .img-display{\r\n            .pic{\r\n                box-sizing: border-box;\r\n                width: 440px;\r\n                position: relative;\r\n                height: 440px;\r\n                .imgbox{\r\n                    position: relative;\r\n                    overflow: hidden;\r\n                    width: 100%;\r\n                    height: 100%;\r\n                    background: #f9f9f9;\r\n                    img{\r\n                        width: 100%;\r\n                        height: 100%;\r\n                    }\r\n                }\r\n            }\r\n            .smallnav{\r\n                        position: relative;\r\n                        z-index: 1;\r\n                        zoom: 1;\r\n                        width: 440px;\r\n                        height: 80px;\r\n                        margin-top: 10px;\r\n                        overflow: hidden;\r\n                        ul{\r\n                            width: 3000px;\r\n                            transition: 0.3s;\r\n                            overflow: hidden;\r\n                            li{\r\n                                box-sizing: border-box;\r\n                                float: left;\r\n                                width: 80px;\r\n                                height: 80px;\r\n                                margin-right: 10px;\r\n                                background: #f9f9f9;\r\n                            }\r\n                        }\r\n                    }\r\n            }\r\n            .n-info{\r\n            width: 580px;\r\n            float: right;\r\n            .basic{\r\n                position: relative;\r\n                h2{\r\n                    line-height: 34px;\r\n                    color: #333;\r\n                    font-weight: normal;\r\n                    font-size: 24px;\r\n                }\r\n                .price{\r\n                        margin: 20px 0;\r\n                        font-size: 14px;\r\n                        span{\r\n                            font-size: 30px;\r\n                            margin-right: 3px;\r\n                            color: #d33a31;\r\n                        }\r\n                        em{\r\n                            margin-right: 4px;\r\n                            font-size: 30px;\r\n                            color: #d33a31;\r\n                        }    \r\n                }\r\n                .standard{\r\n                    .select-box{\r\n                        margin: 16px -16px 0 -8px;\r\n                        border: 1px solid #fff;\r\n                        padding: 0 7px;\r\n                        overflow: hidden;\r\n                        ul{\r\n                            overflow: hidden;\r\n                            width: 510px;\r\n                            float: left;\r\n                            margin-bottom: -8px;\r\n                            li{\r\n                                box-sizing: border-box;\r\n                                height: 30px;\r\n                                position: relative;\r\n                                margin-bottom: 10px;\r\n                                line-height: 27px;\r\n                                font-size: 12px;\r\n                                float: left;\r\n                                margin-right: 10px;\r\n                                padding: 0 20px;\r\n                                border: 1px solid #e5e5e5;\r\n                                background: #fff;\r\n                                cursor: pointer;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                .count{\r\n                    .count-box{\r\n                        margin-top: 17px;\r\n                        overflow: hidden;\r\n                        // .u-number{\r\n                        //     float: left;\r\n                        //     width: 132px;\r\n                        //     height: 30px;\r\n                        //     border: 1px solid #e5e5e5;\r\n                        //     border-left: none;\r\n                        //     .u-btn{\r\n                        //         float: left;\r\n                        //         width: 34px;\r\n                        //         height: 30px;\r\n                        //         border-left: 1px solid #e5e5e5;\r\n                        //         i{\r\n                        //             position: relative;\r\n                        //             left: 3px;\r\n                        //             top: 1px;\r\n                        //             display: block;\r\n                        //             width: 100%;\r\n                        //             height: 100%;\r\n                        //             overflow: hidden;\r\n                        //             background: url(../assets/icon.png) no-repeat\r\n                        //         }\r\n                        //     }\r\n                        //     .tot{\r\n                        //         float: left;\r\n                        //         width: 59px;\r\n                        //         height: 30px;\r\n                        //         border-left: 1px solid #e5e5e5;\r\n                        //         input{\r\n                        //             width: 100%;\r\n                        //             margin: 0;\r\n                        //             padding: 0;\r\n                        //             border: none;\r\n                        //             font-size: 14px;\r\n                        //             height: 30px;\r\n                        //             line-height: 30px;\r\n                        //             text-align: center;\r\n                        //         }\r\n                        //     }\r\n                        // }\r\n                    }\r\n                }\r\n            }\r\n            .services{\r\n                    position: relative;\r\n                    margin-top: 17px;\r\n                    .servecnt{\r\n                        cursor: pointer;\r\n                        margin-left: 69px;\r\n                        .serveitem{\r\n                            display: inline-block;\r\n                            position: relative;\r\n                            line-height: 30px;\r\n                            font-size: 12px;\r\n                            margin-right: 28px;\r\n                            color: #666;\r\n                        }\r\n                        .serveitem::before{\r\n                            content: \"\";\r\n                            position: absolute;\r\n                            top: 13px;\r\n                            left: -8px;\r\n                            width: 3px;\r\n                            height: 3px;\r\n                            border-radius: 100%;\r\n                            background-color: #d33a31;\r\n                        }\r\n                    }\r\n            }\r\n            }\r\n        }\r\n        .n-contend{\r\n            overflow: hidden;\r\n            margin-top: 66px;\r\n            .n-contend-left{\r\n                float: left;\r\n                width: 700px;\r\n                .n-describe{\r\n                    float: left;\r\n                    width: 700px;\r\n                    .j-flag{\r\n                        img{\r\n                            display: block;\r\n                            width: 100%;\r\n                            height: auto;\r\n                        }\r\n                        p{\r\n                            font-size: 14px;\r\n                            line-height: 18px;\r\n                            padding: 5px 0;\r\n                            color: #666;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            .hotrecommned{\r\n                float: right;\r\n                width: 340px;\r\n                .normal{\r\n                    font-weight: normal;\r\n                }\r\n                .m-product{\r\n                    .hotitem{\r\n                        float: left;\r\n                        width: 100%;\r\n                        height: 100px;\r\n                        position: relative;\r\n                        padding-right: 16px;\r\n                        margin-bottom: 40px;\r\n                        .picbox{\r\n                            float: left;\r\n                            height: 100px;\r\n                            width: 100px;\r\n                            background-color: #f9f9f9;\r\n                            position: relative;\r\n                            img{\r\n                                display: block;\r\n                                height: 100%;\r\n                                width: 100%;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        .topbar{\r\n            position: fixed;\r\n            left: 0;\r\n            top: 0;\r\n            width: 100%;\r\n            height: 70px;\r\n            background-color: #fff;\r\n            z-index: 999;\r\n            .barbox{\r\n                overflow: hidden;\r\n                position: relative;\r\n                width: 1100px;\r\n                height: 70px;\r\n                margin: 0 auto;\r\n                .imgbox{\r\n                    height: 50px;\r\n                    width: 50px;\r\n                    margin-top: 10px;\r\n                    float: left;\r\n                    background: #f9f9f9;\r\n                    img{\r\n                        display: block;\r\n                        width: 100%;\r\n                        height: 100%;\r\n                    }\r\n                }\r\n                .barmsg{\r\n                    width: 634px;\r\n                    height: 48px;\r\n                    float: left;\r\n                    padding: 11px 0;\r\n                    padding-left: 16px;\r\n                    margin-right: 60px;\r\n                    p{\r\n                        font-size: 16px;\r\n                        height: 26px;\r\n                        line-height: 26px;\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\n</style>"],"mappings":"AAkHA,SAAAA,MAAA;AACA,SAAAC,QAAA,EAAAC,YAAA,EAAAC,UAAA;AACA;AACA;AACA;EACAC,IAAA;EACAC,KAAA;EACA;EACA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,MAAA;MACAC,GAAA;MACAC,WAAA;IACA;EACA;EACAC,OAAA;IACAC,KAAAN,IAAA;MACA,KAAAE,MAAA,GAAAF,IAAA;MACAO,OAAA,CAAAC,GAAA,MAAAN,MAAA;IACA;IACA,GAAAN,YAAA;IACA,GAAAC,UAAA;IACAY,cAAA;MACA;MACA;MACA,MAAAC,KAAA;QACAC,EAAA,EAAAjB,MAAA;QACAkB,KAAA,OAAAC,MAAA;QACAC,KAAA,OAAAA,KAAA;QACAZ,MAAA,OAAAA,MAAA;QACAa,KAAA;MACA;MACA,KAAAC,mBAAA,CAAAN,KAAA;MACA;MACA,KAAAO,QAAA;QACAC,SAAA;QACAC,OAAA;QACAC,IAAA;MACA;IAEA;IACAC,qBAAA;MACA,IAAAC,SAAA,GAAAC,QAAA,CAAAC,IAAA,CAAAF,SAAA,IAAAC,QAAA,CAAAE,eAAA,CAAAH,SAAA;MACA;MACA,IAAAA,SAAA;QACA,KAAArB,SAAA;MACA;MACA,IAAAqB,SAAA;QACA,KAAArB,SAAA;MACA;IACA;EACA;EACAyB,KAAA;IACAtB,WAAA;MACAuB,SAAA;MACAC,IAAA;MACAC,QAAAC,GAAA;QACA,KAAA3B,GAAA,GAAA2B,GAAA;MACA;IACA;IACA3B,GAAA;MACAyB,IAAA;MACAC,QAAAE,MAAA;QACA;QACA,KAAA3B,WAAA,GAAA2B,MAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,GAAArC,QAAA;IACA;EAEA;;EACAsC,QAAA;IACAC,MAAA,CAAAC,gBAAA,gBAAAd,oBAAA;IACA,KAAAe,IAAA,CAAAC,GAAA,oBAAA/B,IAAA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAGA;EACAgC,UAAA;IACAJ,MAAA,CAAAK,mBAAA,gBAAAlB,oBAAA;IACA,KAAAe,IAAA,CAAAI,IAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}